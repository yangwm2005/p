<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Presentation Pro - OGSTM Framework for Biomedical Science</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #27ae60;
            --warning-color: #f39c12;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .intro {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .intro h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .welcome-message {
            background: linear-gradient(135deg, #e8f4fc, #d1ecf1);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--secondary-color);
        }
        
        .ogstm-explanation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .ogstm-card {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-top: 4px solid var(--secondary-color);
        }
        
        .ogstm-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .ogstm-card h3 span {
            background-color: var(--secondary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        .paper-section {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            border-left: 5px solid var(--accent-color);
        }
        
        .paper-section h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .storytelling-section {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            border-left: 5px solid var(--success-color);
        }
        
        .storytelling-section h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .storytelling-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .tip-card {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 6px;
            border-left: 4px solid var(--success-color);
        }
        
        .tip-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .form-container {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .example-btn {
            background: none;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
            margin-top: 0.5rem;
        }
        
        .example-text {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 0.5rem;
            font-style: italic;
            display: none;
        }
        
        .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--primary-color);
        }
        
        .btn-generate {
            display: block;
            margin: 2rem auto;
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
        }
        
        .btn-accent:hover {
            background-color: #c0392b;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219955;
        }
        
        .file-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .figures-section {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #eee;
        }
        
        .figure-item {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 6px;
        }
        
        .figure-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .figure-title {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .remove-figure {
            background: var(--accent-color);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .report-container {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-top: 2rem;
            display: none;
        }
        
        .report-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .report-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .report-content {
            white-space: pre-line;
            line-height: 1.6;
        }
        
        .figure-story {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid var(--success-color);
        }
        
        .story-flow {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background-color: #e8f4fc;
            border-radius: 6px;
        }
        
        .story-flow-item {
            flex: 1;
            text-align: center;
            padding: 0.5rem;
        }
        
        .story-flow-arrow {
            font-size: 1.5rem;
            color: var(--secondary-color);
        }
        
        .hypothesis-flow {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .hypothesis-step {
            padding: 1.5rem;
            border-radius: 6px;
            background-color: #f8f9fa;
        }
        
        .hypothesis-step h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }
        
        .hypothesis-step h4 span {
            background-color: var(--warning-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.8rem;
        }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        footer {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 2rem;
            background-color: var(--dark-color);
            color: white;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .copyright {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .ogstm-explanation, .storytelling-tips {
                grid-template-columns: 1fr;
            }
            
            .actions, .file-actions {
                flex-direction: column;
            }
            
            .story-flow {
                flex-direction: column;
            }
            
            .story-flow-arrow {
                transform: rotate(90deg);
                margin: 0.5rem 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Paper Presentation Pro</h1>
        <p class="subtitle">OGSTM Framework for Biomedical Science Paper Presentations</p>
    </header>
    
    <div class="container">
        <section class="intro">
            <div class="welcome-message">
                <h2>Welcome to Your Paper Presentation Assistant!</h2>
                <p>Presenting a scientific paper can feel overwhelming, but with the right structure, you can deliver a clear, engaging presentation that highlights the key findings and their significance. This tool will guide you through creating a compelling presentation using the OGSTM framework.</p>
            </div>
            
            <h2>What is the OGSTM Framework?</h2>
            <p>The OGSTM framework (Object, Goal, Strategy, Tactic, Measure) helps you structure your paper presentation effectively. It ensures you cover all essential elements while telling a compelling scientific story.</p>
            
            <div class="ogstm-explanation">
                <div class="ogstm-card">
                    <h3><span>O</span> Object</h3>
                    <p>The overall purpose of your presentation - what you want to achieve at a high level.</p>
                    <p><strong>Example:</strong> To present and critically evaluate the paper "CRISPR-Cas9 mediated gene editing in human cells."</p>
                </div>
                <div class="ogstm-card">
                    <h3><span>G</span> Goal</h3>
                    <p>The specific, measurable outcomes you want to accomplish with your presentation.</p>
                    <p><strong>Example:</strong> Audience will understand the paper's key findings, methodology, and implications for future research.</p>
                </div>
                <div class="ogstm-card">
                    <h3><span>S</span> Strategy</h3>
                    <p>The overall approach you'll take to achieve your goals.</p>
                    <p><strong>Example:</strong> Start with background context, explain the research gap, present key findings, and discuss implications.</p>
                </div>
                <div class="ogstm-card">
                    <h3><span>T</span> Tactic</h3>
                    <p>The specific methods and tools you'll use to implement your strategy.</p>
                    <p><strong>Example:</strong> Use simplified figures, analogies, and real-world applications to explain complex concepts.</p>
                </div>
                <div class="ogstm-card">
                    <h3><span>M</span> Measure</h3>
                    <p>How you'll evaluate the success of your presentation.</p>
                    <p><strong>Example:</strong> Q&A session, peer feedback, and self-assessment of clarity and timing.</p>
                </div>
            </div>
        </section>
        
        <section class="paper-section">
            <h2>Paper Introduction & Hypothesis Development</h2>
            <p>A strong introduction sets the stage for your presentation. It should explain the research context, identify the knowledge gap, and show how the paper addresses this gap.</p>
            
            <div class="hypothesis-flow">
                <div class="hypothesis-step">
                    <h4><span>1</span> Background Context</h4>
                    <p>What is the broader field and why is this research area important? Provide enough context so your audience understands the significance.</p>
                </div>
                <div class="hypothesis-step">
                    <h4><span>2</span> Research Gap</h4>
                    <p>What was unknown before this paper? What specific question needed to be answered? This creates the "problem" that the research addresses.</p>
                </div>
                <div class="hypothesis-step">
                    <h4><span>3</span> Hypothesis Generation</h4>
                    <p>Based on the research gap, what was the paper's central hypothesis? How did the researchers think they could address the gap?</p>
                </div>
                <div class="hypothesis-step">
                    <h4><span>4</span> Experimental Approach</h4>
                    <p>How did the researchers test their hypothesis? Briefly mention the key methods without going into excessive detail.</p>
                </div>
            </div>
        </section>
        
        <section class="storytelling-section">
            <h2>Presenting with a Story: Connecting Figures to Create Narrative Flow</h2>
            <p>Great paper presentations don't just show data - they tell a story. Connect the figures logically to show how each experiment builds on the previous one.</p>
            
            <div class="story-flow">
                <div class="story-flow-item">
                    <strong>Introduction</strong><br>
                    Set the stage with background and research question
                </div>
                <div class="story-flow-arrow">→</div>
                <div class="story-flow-item">
                    <strong>Figure 1</strong><br>
                    Initial evidence supporting the hypothesis
                </div>
                <div class="story-flow-arrow">→</div>
                <div class="story-flow-item">
                    <strong>Figure 2</strong><br>
                    Mechanism or deeper investigation
                </div>
                <div class="story-flow-arrow">→</div>
                <div class="story-flow-item">
                    <strong>Figure 3</strong><br>
                    Validation or broader implications
                </div>
                <div class="story-flow-arrow">→</div>
                <div class="story-flow-item">
                    <strong>Conclusion</strong><br>
                    Summary and future directions
                </div>
            </div>
            
            <div class="storytelling-tips">
                <div class="tip-card">
                    <h4>Focus on the "Why"</h4>
                    <p>For each figure, explain why the experiment was performed and how it addresses the research question.</p>
                </div>
                <div class="tip-card">
                    <h4>Connect the Dots</h4>
                    <p>Explicitly state how each figure leads to the next. Use transition phrases like "To confirm this finding..." or "This led us to ask..."</p>
                </div>
                <div class="tip-card">
                    <h4>Simplify Complex Data</h4>
                    <p>Redraw complex figures to highlight the key message. Remove unnecessary details that might distract your audience.</p>
                </div>
                <div class="tip-card">
                    <h4>Practice Your Narrative</h4>
                    <p>Rehearse explaining each figure without looking at your notes. This ensures you truly understand the story.</p>
                </div>
            </div>
        </section>
        
        <section class="form-container">
            <div class="file-actions">
                <button type="button" id="btn-save" class="btn btn-success">Save Presentation Plan</button>
                <button type="button" id="btn-load" class="btn">Load Presentation Plan</button>
                <input type="file" id="file-input" accept=".json" style="display: none;">
            </div>
            
            <h2>Build Your Paper Presentation</h2>
            <p>Fill in the details below to create a structured presentation plan. We'll focus on making your presentation clear, engaging, and scientifically rigorous.</p>
            
            <form id="ogstm-form">
                <div class="form-group">
                    <label for="presentation-name">Presentation Name</label>
                    <input type="text" id="presentation-name" placeholder="e.g., CRISPR Paper Presentation - Group A">
                </div>
                
                <div class="form-group">
                    <label for="paper-title">Paper Title</label>
                    <input type="text" id="paper-title" placeholder="e.g., CRISPR-Cas9 mediated gene editing in human cells" required>
                </div>
                
                <div class="form-group">
                    <label for="paper-authors">Authors & Journal</label>
                    <input type="text" id="paper-authors" placeholder="e.g., Smith et al., Nature 2023" required>
                </div>
                
                <div class="form-group">
                    <label for="background-context">Background Context</label>
                    <textarea id="background-context" placeholder="What is the broader field and why is this research important?" required></textarea>
                    <button type="button" class="example-btn" data-target="background-example">Show Example</button>
                    <div id="background-example" class="example-text">
Gene editing technologies have revolutionized biomedical research, offering potential treatments for genetic diseases. While early methods like zinc finger nucleases showed promise, they were limited by complexity and cost. The emergence of CRISPR systems offered a more versatile approach, but efficiency and specificity in human cells remained challenges.
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="research-gap">Research Gap & Question</label>
                    <textarea id="research-gap" placeholder="What specific problem or unknown did this paper address?" required></textarea>
                    <button type="button" class="example-btn" data-target="gap-example">Show Example</button>
                    <div id="gap-example" class="example-text">
Previous studies had demonstrated CRISPR-Cas9 activity in vitro and in model organisms, but its efficiency and specificity in human primary cells remained poorly characterized. The key question was: Can CRISPR-Cas9 achieve efficient and precise gene editing in human cells without significant off-target effects?
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="central-hypothesis">Central Hypothesis</label>
                    <textarea id="central-hypothesis" placeholder="What was the paper's main hypothesis?" required></textarea>
                    <button type="button" class="example-btn" data-target="hypothesis-example">Show Example</button>
                    <div id="hypothesis-example" class="example-text">
The authors hypothesized that optimized delivery of the CRISPR-Cas9 system to human primary cells would enable efficient and specific gene editing with minimal off-target effects, potentially opening new avenues for gene therapy.
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="object">Object</label>
                    <textarea id="object" placeholder="What is the overall purpose of your presentation?" required></textarea>
                    <button type="button" class="example-btn" data-target="object-example">Show Example</button>
                    <div id="object-example" class="example-text">
To present and critically evaluate the paper "CRISPR-Cas9 mediated gene editing in human cells," highlighting its methodological innovations, key findings, and implications for future therapeutic applications.
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="goal">Goal</label>
                    <textarea id="goal" placeholder="What specific outcomes do you want to achieve?" required></textarea>
                    <button type="button" class="example-btn" data-target="goal-example">Show Example</button>
                    <div id="goal-example" class="example-text">
1. Audience will understand the paper's key methodological innovations in CRISPR delivery
2. Participants will be able to explain the evidence for efficient editing with minimal off-target effects
3. Listeners will appreciate the paper's implications for future gene therapy approaches
4. Audience will be able to critically evaluate the paper's strengths and limitations
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="strategy">Strategy</label>
                    <textarea id="strategy" placeholder="What is your overall approach to achieve your goals?" required></textarea>
                    <button type="button" class="example-btn" data-target="strategy-example">Show Example</button>
                    <div id="strategy-example" class="example-text">
- Start with background on gene editing technologies to establish context
- Clearly state the research gap and hypothesis
- Present key figures in logical sequence, explaining how each builds on previous findings
- Discuss methodological strengths and limitations
- Conclude with implications and future directions
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tactic">Tactic</label>
                    <textarea id="tactic" placeholder="What specific methods will you use?" required></textarea>
                    <button type="button" class="example-btn" data-target="tactic-example">Show Example</button>
                    <div id="tactic-example" class="example-text">
- Simplified diagrams to explain complex mechanisms
- Animated slides to show experimental workflows
- Side-by-side comparisons with previous technologies
- Clear annotations on figures to highlight key results
- Real-world examples of potential applications
- Time for questions after each major section
                    </div>
                </div>
                
                <div class="figures-section">
                    <h3>Key Figures & Narrative Flow</h3>
                    <p>Add the paper's key figures and develop the story for each. Focus on connecting them logically.</p>
                    
                    <div id="figures-container">
                        <!-- Figures will be added here dynamically -->
                    </div>
                    
                    <button type="button" id="add-figure" class="btn btn-accent">Add Figure</button>
                </div>
                
                <div class="form-group">
                    <label for="conclusion">Conclusion & Implications</label>
                    <textarea id="conclusion" placeholder="What are the paper's main conclusions and their significance?" required></textarea>
                    <button type="button" class="example-btn" data-target="conclusion-example">Show Example</button>
                    <div id="conclusion-example" class="example-text">
The study demonstrates that optimized CRISPR-Cas9 delivery enables efficient and specific gene editing in human primary cells. This represents a significant advancement toward clinical applications of gene editing. However, challenges remain in delivery efficiency and comprehensive off-target assessment. Future work should focus on improving delivery systems and conducting long-term safety studies.
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="critical-evaluation">Critical Evaluation</label>
                    <textarea id="critical-evaluation" placeholder="What are the paper's strengths and limitations?" required></textarea>
                    <button type="button" class="example-btn" data-target="evaluation-example">Show Example</button>
                    <div id="evaluation-example" class="example-text">
Strengths: Comprehensive assessment of editing efficiency, rigorous controls, multiple validation methods.
Limitations: Limited assessment of long-term effects, primary focus on one cell type, potential delivery method constraints.
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="measure">Measure</label>
                    <textarea id="measure" placeholder="How will you evaluate your presentation's success?" required></textarea>
                    <button type="button" class="example-btn" data-target="measure-example">Show Example</button>
                    <div id="measure-example" class="example-text">
- Q&A session to assess understanding of key concepts
- Peer feedback on clarity and organization
- Self-assessment of timing and confidence
- Ability to answer questions about methodological details
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="target-audience">Target Audience</label>
                    <select id="target-audience" required>
                        <option value="">Select your audience</option>
                        <option value="undergraduate">Undergraduate Students</option>
                        <option value="graduate">Graduate Students</option>
                        <option value="faculty">Faculty/Researchers</option>
                        <option value="mixed">Mixed Audience</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="presentation-length">Presentation Length</label>
                    <select id="presentation-length" required>
                        <option value="">Select length</option>
                        <option value="10">10 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="20">20 minutes</option>
                        <option value="30">30 minutes</option>
                    </select>
                </div>
                
                <button type="submit" class="btn btn-generate">Generate Presentation Plan</button>
            </form>
        </section>
        
        <section id="report-container" class="report-container">
            <h2>Your Paper Presentation Plan</h2>
            
            <div class="report-section">
                <h3>Presentation Information</h3>
                <div id="report-presentation-info" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Paper Information</h3>
                <div id="report-paper-info" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Introduction & Hypothesis</h3>
                <div id="report-introduction" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Object</h3>
                <div id="report-object" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Goal</h3>
                <div id="report-goal" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Strategy</h3>
                <div id="report-strategy" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Tactic</h3>
                <div id="report-tactic" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Key Figures & Narrative</h3>
                <div id="report-figures" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Conclusion & Critical Evaluation</h3>
                <div id="report-conclusion" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Measure</h3>
                <div id="report-measure" class="report-content"></div>
            </div>
            
            <div class="report-section">
                <h3>Presentation Details</h3>
                <div id="report-details" class="report-content"></div>
            </div>
            
            <div class="actions">
                <button id="btn-print" class="btn">Print Plan</button>
                <button id="btn-save-report" class="btn btn-success">Save Plan As File</button>
                <button id="btn-reset" class="btn btn-warning">Create New Plan</button>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Paper Presentation Pro - OGSTM Framework for Biomedical Science</p>
            <p>Designed to help students deliver engaging and effective paper presentations</p>
            <p class="copyright">Copyright 2025. All rights reserved for Dr. Wen-Ming Yang Lab v1.0 20251006</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let figureCount = 0;
            
            // Example buttons
            const exampleButtons = document.querySelectorAll('.example-btn');
            exampleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    const exampleText = document.getElementById(targetId);
                    exampleText.style.display = exampleText.style.display === 'block' ? 'none' : 'block';
                });
            });
            
            // Add figure button
            document.getElementById('add-figure').addEventListener('click', function() {
                addFigureField();
            });
            
            // Form submission
            const form = document.getElementById('ogstm-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                generateReport();
            });
            
            // Print button
            document.getElementById('btn-print').addEventListener('click', function() {
                window.print();
            });
            
            // Reset button
            document.getElementById('btn-reset').addEventListener('click', function() {
                if (confirm('Are you sure you want to create a new plan? All current data will be lost.')) {
                    form.reset();
                    document.getElementById('figures-container').innerHTML = '';
                    figureCount = 0;
                    document.getElementById('report-container').style.display = 'none';
                    window.scrollTo(0, 0);
                }
            });
            
            // Save button
            document.getElementById('btn-save').addEventListener('click', function() {
                savePresentation();
            });
            
            // Save report button
            document.getElementById('btn-save-report').addEventListener('click', function() {
                savePresentationAsFile();
            });
            
            // Load button
            document.getElementById('btn-load').addEventListener('click', function() {
                document.getElementById('file-input').click();
            });
            
            // File input change
            document.getElementById('file-input').addEventListener('change', function(e) {
                loadPresentation(e);
            });
            
            function addFigureField() {
                figureCount++;
                const figureHTML = `
                    <div class="figure-item" id="figure-${figureCount}">
                        <div class="figure-header">
                            <div class="figure-title">Figure ${figureCount}</div>
                            <button type="button" class="remove-figure" data-figure="${figureCount}">×</button>
                        </div>
                        <div class="form-group">
                            <label for="figure-title-${figureCount}">Figure Title/Description</label>
                            <input type="text" id="figure-title-${figureCount}" placeholder="e.g., Figure 1: CRISPR efficiency in human cells">
                        </div>
                        <div class="form-group">
                            <label for="figure-rationale-${figureCount}">Experimental Rationale</label>
                            <textarea id="figure-rationale-${figureCount}" placeholder="Why was this experiment performed? What question does it address?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="figure-key-finding-${figureCount}">Key Finding</label>
                            <textarea id="figure-key-finding-${figureCount}" placeholder="What is the main takeaway from this figure?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="figure-connection-${figureCount}">Connection to Next Figure</label>
                            <textarea id="figure-connection-${figureCount}" placeholder="How does this finding lead to the next experiment?"></textarea>
                        </div>
                    </div>
                `;
                
                document.getElementById('figures-container').insertAdjacentHTML('beforeend', figureHTML);
                
                // Add event listener to remove button
                document.querySelector(`#figure-${figureCount} .remove-figure`).addEventListener('click', function() {
                    const figureId = this.getAttribute('data-figure');
                    document.getElementById(`figure-${figureId}`).remove();
                });
            }
            
            function generateReport() {
                // Get form values
                const presentationName = document.getElementById('presentation-name').value;
                const paperTitle = document.getElementById('paper-title').value;
                const paperAuthors = document.getElementById('paper-authors').value;
                const background = document.getElementById('background-context').value;
                const researchGap = document.getElementById('research-gap').value;
                const hypothesis = document.getElementById('central-hypothesis').value;
                const object = document.getElementById('object').value;
                const goal = document.getElementById('goal').value;
                const strategy = document.getElementById('strategy').value;
                const tactic = document.getElementById('tactic').value;
                const conclusion = document.getElementById('conclusion').value;
                const evaluation = document.getElementById('critical-evaluation').value;
                const measure = document.getElementById('measure').value;
                const audience = document.getElementById('target-audience').value;
                const length = document.getElementById('presentation-length').value;
                
                // Format audience text
                let audienceText = '';
                switch(audience) {
                    case 'undergraduate':
                        audienceText = 'Undergraduate Students';
                        break;
                    case 'graduate':
                        audienceText = 'Graduate Students';
                        break;
                    case 'faculty':
                        audienceText = 'Faculty/Researchers';
                        break;
                    case 'mixed':
                        audienceText = 'Mixed Audience';
                        break;
                }
                
                // Update report
                document.getElementById('report-presentation-info').textContent = 
                    `Presentation Name: ${presentationName || 'Untitled Presentation'}`;
                
                document.getElementById('report-paper-info').textContent = 
                    `Paper: ${paperTitle}\nAuthors: ${paperAuthors}`;
                
                document.getElementById('report-introduction').textContent = 
                    `BACKGROUND:\n${background}\n\nRESEARCH GAP:\n${researchGap}\n\nHYPOTHESIS:\n${hypothesis}`;
                
                document.getElementById('report-object').textContent = object;
                document.getElementById('report-goal').textContent = goal;
                document.getElementById('report-strategy').textContent = strategy;
                document.getElementById('report-tactic').textContent = tactic;
                document.getElementById('report-conclusion').textContent = 
                    `CONCLUSION:\n${conclusion}\n\nCRITICAL EVALUATION:\n${evaluation}`;
                document.getElementById('report-measure').textContent = measure;
                
                document.getElementById('report-details').textContent = 
                    `Target Audience: ${audienceText}\nPresentation Length: ${length} minutes`;
                
                // Generate figures report
                let figuresReport = '';
                for (let i = 1; i <= figureCount; i++) {
                    const figureTitle = document.getElementById(`figure-title-${i}`)?.value;
                    const figureRationale = document.getElementById(`figure-rationale-${i}`)?.value;
                    const figureFinding = document.getElementById(`figure-key-finding-${i}`)?.value;
                    const figureConnection = document.getElementById(`figure-connection-${i}`)?.value;
                    
                    // Only add figure if it has content
                    if (figureTitle || figureRationale || figureFinding || figureConnection) {
                        figuresReport += `FIGURE ${i}: ${figureTitle || 'Untitled Figure'}\n\n`;
                        figuresReport += `Rationale: ${figureRationale || 'Not specified'}\n\n`;
                        figuresReport += `Key Finding: ${figureFinding || 'Not specified'}\n\n`;
                        figuresReport += `Connection to Next: ${figureConnection || 'Not specified'}\n\n`;
                        figuresReport += '----------------------------------------\n\n';
                    }
                }
                
                if (figuresReport === '') {
                    figuresReport = 'No figures added to the presentation plan.';
                }
                
                document.getElementById('report-figures').textContent = figuresReport;
                
                // Show report
                document.getElementById('report-container').style.display = 'block';
                
                // Scroll to report
                document.getElementById('report-container').scrollIntoView({ behavior: 'smooth' });
            }
            
            function savePresentation() {
                // Collect all form data
                const presentationData = {
                    presentationName: document.getElementById('presentation-name').value,
                    paperTitle: document.getElementById('paper-title').value,
                    paperAuthors: document.getElementById('paper-authors').value,
                    backgroundContext: document.getElementById('background-context').value,
                    researchGap: document.getElementById('research-gap').value,
                    centralHypothesis: document.getElementById('central-hypothesis').value,
                    object: document.getElementById('object').value,
                    goal: document.getElementById('goal').value,
                    strategy: document.getElementById('strategy').value,
                    tactic: document.getElementById('tactic').value,
                    conclusion: document.getElementById('conclusion').value,
                    criticalEvaluation: document.getElementById('critical-evaluation').value,
                    measure: document.getElementById('measure').value,
                    targetAudience: document.getElementById('target-audience').value,
                    presentationLength: document.getElementById('presentation-length').value,
                    figures: [],
                    figureCount: figureCount
                };
                
                // Collect figure data
                for (let i = 1; i <= figureCount; i++) {
                    const figureTitle = document.getElementById(`figure-title-${i}`)?.value;
                    const figureRationale = document.getElementById(`figure-rationale-${i}`)?.value;
                    const figureFinding = document.getElementById(`figure-key-finding-${i}`)?.value;
                    const figureConnection = document.getElementById(`figure-connection-${i}`)?.value;
                    
                    presentationData.figures.push({
                        title: figureTitle || '',
                        rationale: figureRationale || '',
                        finding: figureFinding || '',
                        connection: figureConnection || ''
                    });
                }
                
                // Save to localStorage
                localStorage.setItem('ogstmPresentation', JSON.stringify(presentationData));
                alert('Presentation saved successfully!');
            }
            
            function savePresentationAsFile() {
                // Collect all form data
                const presentationData = {
                    presentationName: document.getElementById('presentation-name').value,
                    paperTitle: document.getElementById('paper-title').value,
                    paperAuthors: document.getElementById('paper-authors').value,
                    backgroundContext: document.getElementById('background-context').value,
                    researchGap: document.getElementById('research-gap').value,
                    centralHypothesis: document.getElementById('central-hypothesis').value,
                    object: document.getElementById('object').value,
                    goal: document.getElementById('goal').value,
                    strategy: document.getElementById('strategy').value,
                    tactic: document.getElementById('tactic').value,
                    conclusion: document.getElementById('conclusion').value,
                    criticalEvaluation: document.getElementById('critical-evaluation').value,
                    measure: document.getElementById('measure').value,
                    targetAudience: document.getElementById('target-audience').value,
                    presentationLength: document.getElementById('presentation-length').value,
                    figures: [],
                    figureCount: figureCount
                };
                
                // Collect figure data
                for (let i = 1; i <= figureCount; i++) {
                    const figureTitle = document.getElementById(`figure-title-${i}`)?.value;
                    const figureRationale = document.getElementById(`figure-rationale-${i}`)?.value;
                    const figureFinding = document.getElementById(`figure-key-finding-${i}`)?.value;
                    const figureConnection = document.getElementById(`figure-connection-${i}`)?.value;
                    
                    presentationData.figures.push({
                        title: figureTitle || '',
                        rationale: figureRationale || '',
                        finding: figureFinding || '',
                        connection: figureConnection || ''
                    });
                }
                
                // Create filename
                const presentationName = document.getElementById('presentation-name').value || 'OGSTM_Presentation';
                const fileName = `${presentationName.replace(/\s+/g, '_')}.json`;
                
                // Create and download file
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(presentationData, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", fileName);
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
            }
            
            function loadPresentation(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const presentationData = JSON.parse(e.target.result);
                        populateForm(presentationData);
                        alert('Presentation loaded successfully!');
                    } catch (error) {
                        alert('Error loading presentation file: ' + error.message);
                    }
                };
                reader.readAsText(file);
            }
            
            function populateForm(data) {
                // Clear existing figures
                document.getElementById('figures-container').innerHTML = '';
                figureCount = 0;
                
                // Populate form fields
                document.getElementById('presentation-name').value = data.presentationName || '';
                document.getElementById('paper-title').value = data.paperTitle || '';
                document.getElementById('paper-authors').value = data.paperAuthors || '';
                document.getElementById('background-context').value = data.backgroundContext || '';
                document.getElementById('research-gap').value = data.researchGap || '';
                document.getElementById('central-hypothesis').value = data.centralHypothesis || '';
                document.getElementById('object').value = data.object || '';
                document.getElementById('goal').value = data.goal || '';
                document.getElementById('strategy').value = data.strategy || '';
                document.getElementById('tactic').value = data.tactic || '';
                document.getElementById('conclusion').value = data.conclusion || '';
                document.getElementById('critical-evaluation').value = data.criticalEvaluation || '';
                document.getElementById('measure').value = data.measure || '';
                document.getElementById('target-audience').value = data.targetAudience || '';
                document.getElementById('presentation-length').value = data.presentationLength || '';
                
                // Populate figures
                if (data.figures && data.figures.length > 0) {
                    data.figures.forEach(figure => {
                        addFigureField();
                        const currentCount = figureCount;
                        document.getElementById(`figure-title-${currentCount}`).value = figure.title || '';
                        document.getElementById(`figure-rationale-${currentCount}`).value = figure.rationale || '';
                        document.getElementById(`figure-key-finding-${currentCount}`).value = figure.finding || '';
                        document.getElementById(`figure-connection-${currentCount}`).value = figure.connection || '';
                    });
                }
                
                // Generate report if we have data
                if (data.paperTitle) {
                    generateReport();
                }
            }
            
            // Check if there's a saved presentation in localStorage on page load
            window.addEventListener('load', function() {
                const savedPresentation = localStorage.getItem('ogstmPresentation');
                if (savedPresentation) {
                    if (confirm('Would you like to load your previously saved presentation?')) {
                        try {
                            const presentationData = JSON.parse(savedPresentation);
                            populateForm(presentationData);
                        } catch (error) {
                            console.error('Error loading saved presentation:', error);
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>